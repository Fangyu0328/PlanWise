{"ast":null,"code":"import axios from 'axios';\nconst API_URL = 'http://localhost:4000/api';\n\n/**\n * Parse natural language input to calendar events\n * @param {string} text - Natural language description of event\n * @returns {Promise<Object>} - Parsed event data\n */\nexport const parseEventText = async text => {\n  try {\n    const response = await axios.post(`${API_URL}/parse-event`, {\n      text\n    });\n    const result = response.data;\n\n    // Convert string dates to Date objects\n    return {\n      ...result,\n      start: new Date(result.start),\n      end: new Date(result.end)\n    };\n  } catch (error) {\n    console.error('Error parsing event text:', error);\n    // Fallback to simple parsing if API call fails\n    return fallbackParsing(text);\n  }\n};\n\n/**\n * Generate task schedule based on priorities and deadlines\n * @param {Array} tasks - List of tasks with priorities and deadlines\n * @returns {Promise<Array>} - Optimized schedule of tasks\n */\nexport const generateTaskSchedule = async tasks => {\n  try {\n    const response = await axios.post(`${API_URL}/schedule-tasks`, {\n      tasks\n    });\n\n    // Convert string dates to Date objects in the schedule\n    return response.data.schedule.map(task => ({\n      ...task,\n      start: new Date(task.start),\n      end: new Date(task.end)\n    }));\n  } catch (error) {\n    console.error('Error generating task schedule:', error);\n    // Fallback to simple scheduling if API call fails\n    return fallbackScheduling(tasks);\n  }\n};\n\n/**\n * Generate personalized habit recommendations based on mood and activity history\n * @param {Array} moodEntries - History of mood entries\n * @param {Array} activityEntries - History of activities\n * @returns {Promise<Array>} - Personalized recommendations\n */\nexport const generateRecommendations = async (moodEntries, activityEntries) => {\n  try {\n    const response = await axios.post(`${API_URL}/generate-recommendations`, {\n      moodEntries,\n      activityEntries\n    });\n    return response.data.recommendations;\n  } catch (error) {\n    console.error('Error generating recommendations:', error);\n    // Fallback to simple recommendations if API call fails\n    return fallbackRecommendations(moodEntries, activityEntries);\n  }\n};\n\n// Fallback functions in case the API calls fail\nconst fallbackParsing = text => {\n  // Simple parsing logic similar to what we had before\n  const lowerText = text.toLowerCase();\n  let title = text;\n  let start = new Date();\n  let end = new Date();\n\n  // Very basic parsing logic\n  if (lowerText.includes('tomorrow')) {\n    start.setDate(start.getDate() + 1);\n    end.setDate(end.getDate() + 1);\n  }\n  if (lowerText.includes('meeting')) {\n    title = 'Meeting';\n    // Default meeting duration: 1 hour\n    end = new Date(start.getTime() + 60 * 60 * 1000);\n  }\n  return {\n    title,\n    start,\n    end,\n    notes: '',\n    location: ''\n  };\n};\nconst fallbackScheduling = tasks => {\n  // Sort by priority and deadline\n  return [...tasks].sort((a, b) => {\n    // First by priority (high to low)\n    if (b.priority.value !== a.priority.value) {\n      return b.priority.value - a.priority.value;\n    }\n    // Then by deadline (earlier first)\n    return new Date(a.deadline) - new Date(b.deadline);\n  }).map(task => {\n    // Create scheduled events\n    return {\n      title: task.name,\n      start: new Date(),\n      end: new Date(new Date().getTime() + task.estimatedHours * 60 * 60 * 1000),\n      category: task.category\n    };\n  });\n};\nconst fallbackRecommendations = (moodEntries, activityEntries) => {\n  // Simple recommendations\n  return [{\n    id: 'morning',\n    title: 'Morning Routine',\n    activities: [{\n      time: '07:00 AM',\n      description: 'Wake up & hydrate',\n      category: 'selfCare'\n    }, {\n      time: '07:15 AM',\n      description: 'Quick stretch or meditation',\n      category: 'selfCare'\n    }, {\n      time: '07:45 AM',\n      description: 'Healthy breakfast',\n      category: 'selfCare'\n    }, {\n      time: '08:15 AM',\n      description: 'Plan your day',\n      category: 'work'\n    }]\n  }, {\n    id: 'balance',\n    title: 'Balance Your Day',\n    activities: [{\n      time: '11:30 AM',\n      description: 'Take a short break',\n      category: 'selfCare'\n    }, {\n      time: '05:00 PM',\n      description: 'Transition from work to personal time',\n      category: 'selfCare'\n    }, {\n      time: '07:00 PM',\n      description: 'Dinner & relaxation',\n      category: 'leisure'\n    }, {\n      time: '10:00 PM',\n      description: 'Wind down routine',\n      category: 'sleep'\n    }]\n  }];\n};\nexport default {\n  parseEventText,\n  generateTaskSchedule,\n  generateRecommendations\n};","map":{"version":3,"names":["axios","API_URL","parseEventText","text","response","post","result","data","start","Date","end","error","console","fallbackParsing","generateTaskSchedule","tasks","schedule","map","task","fallbackScheduling","generateRecommendations","moodEntries","activityEntries","recommendations","fallbackRecommendations","lowerText","toLowerCase","title","includes","setDate","getDate","getTime","notes","location","sort","a","b","priority","value","deadline","name","estimatedHours","category","id","activities","time","description"],"sources":["/Users/wenxinmiao/Desktop/PlanWise/client/src/Services/openAIservice.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_URL = 'http://localhost:4000/api';\n\n/**\n * Parse natural language input to calendar events\n * @param {string} text - Natural language description of event\n * @returns {Promise<Object>} - Parsed event data\n */\nexport const parseEventText = async (text) => {\n  try {\n    const response = await axios.post(`${API_URL}/parse-event`, { text });\n    const result = response.data;\n    \n    // Convert string dates to Date objects\n    return {\n      ...result,\n      start: new Date(result.start),\n      end: new Date(result.end)\n    };\n  } catch (error) {\n    console.error('Error parsing event text:', error);\n    // Fallback to simple parsing if API call fails\n    return fallbackParsing(text);\n  }\n};\n\n/**\n * Generate task schedule based on priorities and deadlines\n * @param {Array} tasks - List of tasks with priorities and deadlines\n * @returns {Promise<Array>} - Optimized schedule of tasks\n */\nexport const generateTaskSchedule = async (tasks) => {\n  try {\n    const response = await axios.post(`${API_URL}/schedule-tasks`, { tasks });\n    \n    // Convert string dates to Date objects in the schedule\n    return response.data.schedule.map(task => ({\n      ...task,\n      start: new Date(task.start),\n      end: new Date(task.end)\n    }));\n  } catch (error) {\n    console.error('Error generating task schedule:', error);\n    // Fallback to simple scheduling if API call fails\n    return fallbackScheduling(tasks);\n  }\n};\n\n/**\n * Generate personalized habit recommendations based on mood and activity history\n * @param {Array} moodEntries - History of mood entries\n * @param {Array} activityEntries - History of activities\n * @returns {Promise<Array>} - Personalized recommendations\n */\nexport const generateRecommendations = async (moodEntries, activityEntries) => {\n  try {\n    const response = await axios.post(`${API_URL}/generate-recommendations`, {\n      moodEntries,\n      activityEntries\n    });\n    \n    return response.data.recommendations;\n  } catch (error) {\n    console.error('Error generating recommendations:', error);\n    // Fallback to simple recommendations if API call fails\n    return fallbackRecommendations(moodEntries, activityEntries);\n  }\n};\n\n// Fallback functions in case the API calls fail\nconst fallbackParsing = (text) => {\n  // Simple parsing logic similar to what we had before\n  const lowerText = text.toLowerCase();\n  let title = text;\n  let start = new Date();\n  let end = new Date();\n  \n  // Very basic parsing logic\n  if (lowerText.includes('tomorrow')) {\n    start.setDate(start.getDate() + 1);\n    end.setDate(end.getDate() + 1);\n  }\n  \n  if (lowerText.includes('meeting')) {\n    title = 'Meeting';\n    // Default meeting duration: 1 hour\n    end = new Date(start.getTime() + 60 * 60 * 1000);\n  }\n  \n  return { title, start, end, notes: '', location: '' };\n};\n\nconst fallbackScheduling = (tasks) => {\n  // Sort by priority and deadline\n  return [...tasks].sort((a, b) => {\n    // First by priority (high to low)\n    if (b.priority.value !== a.priority.value) {\n      return b.priority.value - a.priority.value;\n    }\n    // Then by deadline (earlier first)\n    return new Date(a.deadline) - new Date(b.deadline);\n  }).map(task => {\n    // Create scheduled events\n    return {\n      title: task.name,\n      start: new Date(),\n      end: new Date(new Date().getTime() + task.estimatedHours * 60 * 60 * 1000),\n      category: task.category\n    };\n  });\n};\n\nconst fallbackRecommendations = (moodEntries, activityEntries) => {\n  // Simple recommendations\n  return [\n    {\n      id: 'morning',\n      title: 'Morning Routine',\n      activities: [\n        { time: '07:00 AM', description: 'Wake up & hydrate', category: 'selfCare' },\n        { time: '07:15 AM', description: 'Quick stretch or meditation', category: 'selfCare' },\n        { time: '07:45 AM', description: 'Healthy breakfast', category: 'selfCare' },\n        { time: '08:15 AM', description: 'Plan your day', category: 'work' },\n      ]\n    },\n    {\n      id: 'balance',\n      title: 'Balance Your Day',\n      activities: [\n        { time: '11:30 AM', description: 'Take a short break', category: 'selfCare' },\n        { time: '05:00 PM', description: 'Transition from work to personal time', category: 'selfCare' },\n        { time: '07:00 PM', description: 'Dinner & relaxation', category: 'leisure' },\n        { time: '10:00 PM', description: 'Wind down routine', category: 'sleep' },\n      ]\n    }\n  ];\n};\n\nexport default {\n  parseEventText,\n  generateTaskSchedule,\n  generateRecommendations\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}